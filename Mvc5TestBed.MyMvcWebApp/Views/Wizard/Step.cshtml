@model Mvc5TestBed.MyMvcWebApp.Models.Wizard.WizardViewModel
@using System.Activities.Expressions;
@using System.Web.Script.Serialization
@{
    ViewBag.Title = "Step" + Model.CurrentStepNumber;
}
@{
    string data = new JavaScriptSerializer().Serialize(Model);
}

@section scripts
{
    <script src="~/Scripts/knockout-3.3.0.js" type="text/javascript"></script>
    <script src="~/Scripts/knockout.mapping-latest.js" type="text/javascript"></script>
    <script src="~/Scripts/wizardViewModel.js" type="text/javascript"></script>
    <script src="~/Scripts/stepViewModel.js" type="text/javascript"></script>
    <script type="text/javascript">
        var wizardViewModel = new WizardViewModel(@Html.Raw(data));
        ko.applyBindings(wizardViewModel);

        $(document).ready(function () {
            //replace bootstrap "hidden" class with jQuery's hide()
            $("label.hidden").hide().removeClass("hidden");
            $("button.hidden").hide().removeClass("hidden");
        });
    </script>
}

<h2>Step <span data-bind="text: CurrentStepNumber"></span> of <span data-bind="text: StepCount"></span></h2>

@*<div class="form-group">
        <label for="CurrentStepNumber" class="control-label">Current Step#:</label>
        <input name="CurrentStepNumber" id="CurrentStepNumber" data-bind="value: CurrentStepNumber" class="form-control" />
    </div
    <div class="form-group">
        <label for="StepCount" class="control-label">Total Steps:</label>
        <input name="StepCount" id="StepCount" data-bind="value: StepCount" class="form-control" />
    </div>>*@
<hr />
<div id="Step_1">

    <div class="form-group">
        <label for="Step_1_Field_A" class="control-label @(Model.CurrentStepNumber == 1 ? "":"hidden")">Step_1_Field_A:</label>
        <input type="@(Model.CurrentStepNumber == 1 ? "text":"hidden")" name="Step_1_Field_A" id="Step_1_Field_A" data-bind="value: Step_1_Field_A" class="form-control" />
    </div>
    <div class="form-group">
        <label for="Step_1_Field_B" class="control-label@(Model.CurrentStepNumber == 1 ? "" : "hidden")">Step_1_Field_B:</label>
        <input type="@(Model.CurrentStepNumber == 1 ? "text":"hidden")" name="Step_1_Field_B" id="Step_1_Field_B" data-bind="value: Step_1_Field_B" class="form-control" />
    </div>
</div>

<div id="Step_2">
    <div class="form-group">
        <label for="Step_2_Field_A" class="control-label @(Model.CurrentStepNumber == 2 ? "" : "hidden")">Step_2_Field_A:</label>
        <input type="@(Model.CurrentStepNumber == 2 ? "text":"hidden")" name="Step_2_Field_A" id="Step_2_Field_A" data-bind="value: Step_2_Field_A" class="form-control" />
    </div>
    <div class="form-group">
        <label for="Step_2_Field_B" class="control-label @(Model.CurrentStepNumber == 2 ? "" : "hidden")">Step_2_Field_B:</label>
        <input type="@(Model.CurrentStepNumber == 2 ? "text":"hidden")" name="Step_2_Field_B" id="Step_2_Field_B" data-bind="value: Step_2_Field_B" class="form-control" />
    </div>
    <div class="form-group">
        <label for="Step_2_Field_C" class="control-label @(Model.CurrentStepNumber == 2 ? "" : "hidden")">Step_2_Field_C:</label>
        <input type="@(Model.CurrentStepNumber == 2 ? "text":"hidden")" name="Step_2_Field_C" id="Step_2_Field_C" data-bind="value: Step_2_Field_C" class="form-control" />
    </div>
    <div class="form-group">
        <label for="Step_2_Field_D" class="control-label @(Model.CurrentStepNumber == 2 ? "" : "hidden")">Step_2_Field_D:</label>
        <input type="@(Model.CurrentStepNumber == 2 ? "text":"hidden")" name="Step_2_Field_D" id="Step_2_Field_D" data-bind="value: Step_2_Field_D" class="form-control" />
    </div>
</div>


<div id="Step_3">
    <div class="form-group">
        <label for="Step_3_Field_A" class="control-label @(Model.CurrentStepNumber == 3 ? "" : "hidden")">Step_3_Field_A:</label>
        <input type="@(Model.CurrentStepNumber == 3 ? "text":"hidden")" name="Step_3_Field_A" id="Step_3_Field_A" data-bind="value: Step_3_Field_A" class="form-control" />
    </div>
    <div class="form-group">
        <label for="Step_3_Field_B" class="control-label @(Model.CurrentStepNumber == 3 ? "" : "hidden")">Step_3_Field_B:</label>
        <input type="@(Model.CurrentStepNumber == 3 ? "text":"hidden")" name="Step_3_Field_B" id="Step_3_Field_B" data-bind="value: Step_3_Field_B" class="form-control" />
    </div>
    <div class="form-group">
        <label for="Step_3_Field_C" class="control-label @(Model.CurrentStepNumber == 3 ? "" : "hidden")">Step_3_Field_C:</label>
        <input type="@(Model.CurrentStepNumber == 3 ? "text":"hidden")" name="Step_3_Field_C" id="Step_3_Field_C" data-bind="value: Step_3_Field_C" class="form-control" />
    </div>
</div>

<hr />


<div id="nextBackButtonGroup" class="@(Model.CurrentStepNumber>1 ? "btn-group" : "")">

    <button id="btnBack" data-bind="click: goBack" class="btn btn-danger @(Model.CurrentStepNumber>1?"":" hidden")">
        Back
    </button>
    <button id="btnNext" data-bind="click: advance" class="btn btn-success @(Model.CurrentStepNumber>=Model.StepCount?" hidden":"")">
        Next
    </button>
    <button id="btnComplete" data-bind="click: complete" class="btn btn-primary @(Model.CurrentStepNumber>=Model.StepCount?"":"hidden")">
        Complete
    </button>

</div>
